 p(X,Y):- a(X), b(X), !, c(Y), d(Y).  
 p(1,Y):- c(Y).
 p(X,2):- c(X).
 a(1).
 a(2).
 a(3).
 b(3).
 b(4).
 c(1).
 c(2).
 c(3).
 d(2).
 d(3).